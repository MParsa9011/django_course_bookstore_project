{% extends '_base.html' %}

{% block page_title %}{{ book.title }}{% endblock page_title %}

{% block content %}
<style>
/* —- انیمیشن ورود عمومی —- */
.fade-up {
  opacity: 0;
  transform: translateY(30px);
  animation: fadeUp .6s forwards;
}
@keyframes fadeUp {
  to {opacity:1; transform:translateY(0);}
}

/* —- عکس کتاب —- */
.book-cover {
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  transition: transform .3s ease;
}
.book-cover:hover {
  transform: scale(1.03);
}

/* —- عنوان کتاب —- */
.book-title {
  font-weight: bold;
  font-size: 2rem;
  margin-bottom: .5rem;
}

/* —- دکمه‌ها —- */
.btn-warning, .btn-danger, .btn-primary {
  border-radius: 50rem;
  transition: all .3s ease;
}
.btn-warning:hover {
  background-color: #f59e0b;
}
.btn-danger:hover {
  background-color: #dc2626;
}
.btn-primary:hover {
  background-color: #2563eb;
}

/* —- کارت‌های نظرات و فرم —- */
.card-custom {
  border: none;
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  transition: box-shadow .3s ease;
}
.card-custom:hover {
  box-shadow: 0 12px 32px rgba(0,0,0,0.15);
}

/* —- بخش نظرها —- */
.comment-block {
  border-bottom: 1px solid #e5e5e5;
  padding-bottom: 1rem;
  margin-bottom: 1rem;
}
.comment-block:last-child {
  border-bottom: none;
}

/* —- فرم —- */
.form-control {
  border-radius: .75rem;
  box-shadow: none;
  transition: box-shadow .3s ease, border-color .3s ease;
}
.form-control:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 .2rem rgba(37,99,235,.25);
}
</style>

<div class="container mt-5" dir="rtl">

  <!-- بخش بالا -->
  <div class="d-flex justify-content-center fade-up" style="animation-delay:.1s">
    <div class="row w-sm-75 w-100">
      <div class="col-xs-12 col-md-3 d-flex justify-content-center mb-3 mb-md-0">
        <img src="{{ book.cover.url }}" class="img-fluid book-cover" alt="{{ book.title }}">
      </div>

      <div class="col-xs-12 col-md-6 text-center text-md-end mt-md-1 mt-4">
        <h1 class="book-title">{{ book.title }}</h1>
        <h5 class="small my-1 text-muted">نویسنده: <span class="text-dark">{{ book.author }}</span></h5>
        <h5 class="small my-1 text-muted">مترجم: <span class="text-dark">{{ book.translator }}</span></h5>
        <h5 class="small my-1 text-muted">انتشارات: <span class="text-dark">{{ book.publisher }}</span></h5>
        <div class="mt-3">
          <a class="btn btn-warning me-2" href="{% url 'book_update' book.id %}">ویرایش</a>
          <a class="btn btn-danger" href="{% url 'book_delete' book.id %}">حذف</a>
        </div>
      </div>

      <div class="col-xs-12 col-md-3 d-flex flex-column mt-3 mt-md-0">
        <h3 class="align-self-center pt-2 text-muted align-self-md-end fade-up" style="animation-delay:.2s">
          {{ book.price }} هزار تومان
        </h3>
      </div>
    </div>
  </div>

  <!-- متن کتاب -->
  <div class="d-flex justify-content-center fade-up" style="animation-delay:.3s">
    <div class="my-3 p-5 w-sm-75 w-100 card-custom">
      {{ book.content|linebreaks }}
    </div>
  </div>

  <!-- نظرات -->
  <div class="d-flex justify-content-center fade-up" style="animation-delay:.4s">
    <div class="card card-custom my-3 p-5 w-sm-75 w-100">
      <h2 class="mb-5">نظرات:</h2>

      <div class="comment-block">
        <h5 class="mb-2">نوشین توکلی</h5>
        <p>با سلام چند تا نکته میخواستم بگم اول اینکه من …</p>
      </div>
      <div class="comment-block">
        <h5 class="mb-2">نوشین توکلی</h5>
        <p>با سلام چند تا نکته میخواستم بگم اول اینکه من …</p>
      </div>
      <div class="comment-block">
        <h5 class="mb-2">نوشین توکلی</h5>
        <p>با سلام چند تا نکته میخواستم بگم اول اینکه من …</p>
      </div>
    </div>
  </div>

  <!-- فرم نظر -->
  <div class="d-flex justify-content-center fade-up" style="animation-delay:.5s">
    <div class="card card-custom my-3 p-5 w-sm-75 w-100">
      <h3 class="mb-4">نظر خود را وارد کنید:</h3>
      <form method="POST">
        <div class="form-group py-2">
          <label class="py-1" for="author_name">نام شما:</label>
          <input type="text" class="form-control" placeholder="علی علوی" name="author_name">
        </div>
        <div class="form-group py-2">
          <label class="py-1" for="email">ایمیل شما:</label>
          <input type="email" class="form-control" placeholder="example@gmail.com" name="email">
        </div>
        <div class="form-group py-2">
          <label class="py-1" for="comment_text">متن نظر:</label>
          <textarea class="form-control" name="text" rows="3"
                    placeholder="نظر خود را اینجا وارد کنید."></textarea>
        </div>
        <button type="submit" class="btn btn-primary mt-3">ارسال</button>
      </form>
    </div>
  </div>

</div>
{% endblock content %}
