{% extends '_base.html' %}

{% block page_title %}لیست کتاب‌ها{% endblock page_title %}

{% block content %}
<style>
/* --- کارت‌ها --- */
.card {
  border: none;
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  transition: transform .3s ease, box-shadow .3s ease;
}
.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 32px rgba(0,0,0,0.15);
}

/* عکس‌ها */
.card img {
  border-radius: 1rem 0 0 1rem;
  object-fit: cover;
  height: 100%;
}

/* متن کارت */
.card-body h3 {
  font-size: 1.4rem;
  font-weight: bold;
}

/* انیمیشن ورود کارت‌ها */
.card-wrapper {
  opacity: 0;
  transform: translateY(30px);
  animation: fadeUp .6s forwards;
}
.card-wrapper:nth-child(odd){
  animation-delay: .1s;
}
.card-wrapper:nth-child(even){
  animation-delay: .2s;
}
@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* صفحه‌بندی */
.pagination .page-link {
  border-radius: 50rem !important;
  margin: 0 4px;
  transition: all .3s ease;
}
.pagination .page-link:hover {
  background-color: #0d6efd;
  color: #fff;
}

/* برای راست‌چین */
[dir="rtl"] .card img {
  border-radius: 0 1rem 1rem 0;
}
</style>

<div class="container mt-4">
  <div class="row flex-row-reverse justify-content-md-center mt-5">
    {% for book in books %}
      <div class="col-md-6 mb-4 card-wrapper">
        <a href="{% url 'book_detail' book.id %}" class="text-decoration-none text-dark">
          <div class="card h-100">
            <div class="row g-0 h-100" dir="rtl">
              <div class="col-md-4">
                {% if book.cover %}
                  <img src="{{ book.cover.url }}" class="img-fluid" alt="{{ book.title }}">
                {% endif %}
              </div>
              <div class="col-md-8 h-100">
                <div class="d-flex flex-column justify-content-between h-100">
                  <div class="card-body">
                    <h3 class="card-title"><strong>{{ book.title }}</strong></h3>
                    <p class="card-text pt-3">{{ book.content|truncatewords:18 }}</p>
                    <p class="text-muted">نویسنده: {{ book.author }}
                      <span> | </span> مترجم: {{ book.translator }}</p>
                    <p class="text-muted">انتشارات: {{ book.publisher }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
</div>

<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center mt-3">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">قبلی</a>
      </li>
    {% endif %}
    <li class="page-item active"><a class="page-link" href="#">{{ page_obj.number }}</a></li>
    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">بعدی</a>
      </li>
    {% endif %}
  </ul>
</nav>
{% endblock content %}
